<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <meta charset="UTF-8">
    <title>Payment</title>
    <link rel="stylesheet" href="/payment.css">
</head>

<body onload="getTotal()">

<form th:action="@{/validation/}" method="POST" class="row justify-content-center" id="payment" style="width: 100%;">
    <div class="container p-0">
        <div class="card px-4">
            <p class="h8 py-3">Payment Details</p>
            <div class="row gx-3">
                <div class="col-12">
                    <div class="d-flex flex-column">
                        <p class="text mb-1">Person Name</p>
                        <input class="form-control mb-3" type="text" id="cname" name="cname">
                    </div>
                </div>
                <div class="col-12">
                    <div class="d-flex flex-column">
                        <p class="text mb-1">Card Number</p>
                        <input class="form-control mb-3" type="text" id="cnum" name="cnum">
                    </div>
                </div>
                <div class="col-6">
                    <div class="d-flex flex-column">
                        <p class="text mb-1">Expiry</p>
                        <input class="form-control mb-3" type="text" id="exp" name="exp" placeholder="MM/YY">
                    </div>
                </div>
                <div class="col-6">
                    <div class="d-flex flex-column">
                        <p class="text mb-1">CVV</p>
                        <input class="form-control mb-3 pt-2 " type="password" id="cvv" name="cvv" placeholder="***">
                    </div>
                </div>


                <div style="display: flex; flex-direction: column; gap: 3px; align-items: center">
                    <div class="col-6">
                        <div class="d-flex flex-column">
                            <p id="totalCss" class="text mb-1">Total (tax included): <span id="grand-total"></span></p>
                        </div>
                    </div>

                    <div class="col-6">
                        <button id="paymentbtn" type="submit" class="d-flex flex-column">
                            <span>
                                <span id="checkout">Pay</span>
                            </span>
                        </button>
                    </div>
                    <div class="col-6">
                        <label th:text="${message}" id="search" name="keyword"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<script>
    function getTotal() {
        var total = localStorage.getItem("total");
        const grandTotal = document.querySelector("#grand-total");
        grandTotal.innerHTML = "$" + localStorage.getItem('total');
    }
</script>
</body>
</html>